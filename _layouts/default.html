<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{{ page.title }} | {{ site.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
  {% include header.html %}
  <div class="main-container">
    <main class="posts-area">
      {{ content }}
      <!-- ✅ 全站共用搜尋結果顯示區 -->
      <div id="search-result-section" style="display:none;">
        <h2 id="search-result-title"></h2>
        <input type="text" id="main-search-input" class="search-input" placeholder="Search again...">
        <div id="search-results"></div>
      </div>

    </main>
    {% include sidebar.html %}
  </div>
  {% include footer.html %}
  <script>
document.addEventListener("DOMContentLoaded", function () {
  const searchInput = document.getElementById("search-input");
  const resultsList = document.getElementById("search-results");

  fetch("/search.json")
    .then((res) => res.json())
    .then((data) => {
      searchInput.addEventListener("input", function () {
        const query = this.value.toLowerCase();
        resultsList.innerHTML = "";

        if (query.length < 2) return;

        const results = data.filter(post =>
          post.title.toLowerCase().includes(query) ||
          post.excerpt.toLowerCase().includes(query)
        );

        results.forEach(post => {
          const li = document.createElement("li");
          const link = document.createElement("a");
          link.href = post.url;
          link.textContent = post.title;
          li.appendChild(link);
          resultsList.appendChild(li);
        });
      });
    });
});
</script>

</body>
</html>

