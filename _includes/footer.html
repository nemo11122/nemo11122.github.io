<footer class="footer">
  <p>&copy; 2025 {{ site.title }}. All rights reserved.</p>
</footer>

<script>
document.addEventListener("DOMContentLoaded", function () {
  const sidebarInput = document.getElementById("search-input");
  const mainInput = document.getElementById("main-search-input");
  const resultSection = document.getElementById("search-result-section");
  const resultTitle = document.getElementById("search-result-title");
  const resultList = document.getElementById("search-results");
  const homepage = document.getElementById("homepage-posts");

  let data = [];

  // è¼‰å…¥æ–‡ç« è³‡æ–™
  fetch("/search.json")
    .then(res => res.json())
    .then(json => { data = json; });

  function performSearch(keyword) {
    const q = keyword.trim().toLowerCase();
    if (!q) return;

    // âœ… é—œéµæ§åˆ¶è¡Œï¼šé¡¯ç¤ºçµæœã€éš±è—é¦–é 
    homepage.style.display = "none";
    resultSection.style.display = "block";

    resultList.innerHTML = "";
    resultTitle.innerHTML = `Search results for: <mark>${q}</mark>`;
    mainInput.value = keyword;

    const results = data.filter(post =>
      post.title.toLowerCase().includes(q) ||
      post.excerpt.toLowerCase().includes(q)
    );

    if (results.length === 0) {
      resultList.innerHTML = `
        <div class="search-not-found">
          <h2>Nothing Found</h2>
          <p>Sorry, but nothing matched your search criteria. Please try again with some different keywords.</p>
        </div>
      `;
      return;
    }

    results.forEach(post => {
      const container = document.createElement("div");
      container.className = "post-item";

      const date = document.createElement("div");
      date.className = "post-date";
      date.textContent = post.date || "";

      const title = document.createElement("h2");
      title.className = "post-title";
      const link = document.createElement("a");
      link.href = post.url;
      link.textContent = post.title;
      title.appendChild(link);

      const excerpt = document.createElement("div");
      excerpt.className = "post-excerpt";
      excerpt.textContent = post.excerpt;

      container.appendChild(date);
      container.appendChild(title);
      container.appendChild(excerpt);
      resultList.appendChild(container);
    });
  }

  // ğŸ” Sidebar è¼¸å…¥æŒ‰ Enter
  sidebarInput.addEventListener("keydown", function (e) {
    if (e.key === "Enter") {
      e.preventDefault();
      performSearch(this.value);
    }
  });

  // ğŸ” ä¸­å¤®æœå°‹æ¬„æŒ‰ Enter
  mainInput.addEventListener("keydown", function (e) {
    if (e.key === "Enter") {
      e.preventDefault();
      performSearch(this.value);
    }
  });
});
</script>
